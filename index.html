<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Review Experiment</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <script type="text/javascript">
      // Global variables to store selected options
      var selectedOptions = {
        'round-one': '',
        'round-one-time': '',
        'likert-one': '',
        'round-two': '',
        'round-two-time': '',
        'likert-two': '',
        'round-three': '',
        'round-three-time': '',
        'likert-three': ''
      };


      // Function to update the selected options
      function updateSelectedOption(section, value) {
        selectedOptions[section] = value;
        console.log(`Selected ${section}: ${value}`);
      }

      // Make a function to return all the value pairs of selectedOptions
      function getSelectedOptions() {
        return selectedOptions;
      }

      // Function to retrieve the selected options
      function getSelectedOption(section) {
        return selectedOptions[section];
      }

       // Updated function to handle option selection
      function handleOptionSelection(section, value) {
        updateSelectedOption(section, value);
        goToNext(section);
      }

      // Updated function to handle radio button selection
      function handleRadioButtonSelection(section) {
        if (!validateRadioSelection(section)) {
          alert("Please make a selection before continuing.");
          return;
        }

        var selectedValue = $(`.${section} input[type="radio"]:checked`).val();
        handleOptionSelection(section, selectedValue);
      }

    </script>

    <style>
      .welcome-page {
        text-align: center;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .instructions {
        display: none;
        text-align: left;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        /* font size */
        font-size: 20px;
      }
      .sample-round {
        display: none;
        text-align: center;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .sample-likert {
        display: none;
        text-align: center;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .round-one, .round-two, .round-three {
        display: none;
        text-align: center;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .round-one input[type="radio"], .round-two input[type="radio"], .round-three input[type="radio"]{
        display: none;
      }

      .likert-one, .likert-two, .likert-three {
        display: none;
        text-align: center;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .confirm-to-start {
        display: none;
        text-align: center;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .results {
        display: none;
        text-align: left;
        position: absolute;
        top: 40%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 20px;
      }

      .copy-results {
        background-color: #f0f0f0;
        padding: 10px;
        border-radius: 10px;
        margin: 10px;
        text-align: left;
      }

      /* Hide the radio button */
      .sample-round input[type="radio"] {
        display: none;
      }

      /* Change the border color when the radio button is selected */
      input[type="radio"]:checked + img {
        outline: 2px solid #f00;
      }

      body {
        background-color: #afafaf;
      }

      .radio label {
        display: inline-block;
        margin: 0 10px 10px 0;
      }

      .btn.btn-primary {
        border-radius: 15px; /* Adjust the value to control the roundness of the corners */
        background-color: #ffffff;
        color: #000000;
      }

      .radio {
        display: flex;
      }

    </style>

  </head>
  <body>
    <div class="welcome-page">
      <h1>Welcome</h1>
      <!-- continue button -->
      <button id="welcome-continue" class="btn btn-primary" onclick="goToNext('welcome')">Continue</button>
    </div>

    <div class="instructions">
      <h1>Instructions</h1>
      <p>Please read the following instructions carefully.</p>
      <p>You will be shown product cards (similar to those in Shopee). There will be 3 different sets of 3 similar items.</p>
      <p>Please select the product that you are most likely to buy <strong>based on how you feel about their quality given their rating</strong> (regardless of the design or look of the actual product). After selecting, click continue to proceed to the next page.</p>
      <p>The next page will show a likert scale representing how confident you are that the product you chose is the best quality out of the rest. Please select your choice.</p>
      <p>After, you may click the "Continue" button to proceed to the next items.</p>
      <br>
      <p>The next page will be a trial run.</p>

      <button id="inctruction-continue" class="btn btn-primary" onclick="goToNext('instructions')">Continue to Trial Round</button>
    </div>

    <div class="sample-round">
      <h1>Sample Round</h1>

      <!-- Make a radio selection using images -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
          <img src="images/sampleround/sample-bag.png" alt="Image 1" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
          <img src="images/sampleround/sample-bag.png" alt="Image 2" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
          <img src="images/sampleround/sample-bag.png" alt="Image 3" draggable="false">
        </label>
      </div>
      <button id="round-continue" class="btn btn-primary" onclick="goToNext('sample-round')">Continue</button>

    </div>

    <div class="sample-likert">
      <h1>Sample Likert</h1>

      <!-- Make a 5-point likert scale -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
          Not Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
          Slightly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
          Somewhat Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios4" value="option4">
          Fairly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios5" value="option5">
          Completely Confident
        </label>
      </div>

      <button id="likert-continue" class="btn btn-primary" onclick="goToNext('sample-likert')">Continue</button>
    </div>

    <div class="confirm-to-start">
      <h1>Press confirm to start</h1>
      <p>The following pages will be the actual experiment.</p>
      <button id="confirm-continue" class="btn btn-primary" onclick="goToNext('confirm')">Continue</button>
    </div>

    <div class="round-one">
      <h1>Round One</h1>

      <!-- Make a radio selection using images -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
          <img src="images/roundone/plain_hoodie.png" alt="Image 1" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
          <img src="images/roundone/sweatshirt_hoodie.png" alt="Image 2" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
          <img src="images/roundone/casual_hoodie.png" alt="Image 3" draggable="false">
        </label>
      </div>
      <button id="round-one-continue" class="btn btn-primary" onclick="handleRadioButtonSelection('round-one')">Continue</button>

    </div>

    <div class="likert-one">
      <h4>How confident are you with the chosen product?</h4>

      <!-- Make a 5-point likert scale -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="not_confident">
          Not Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="slightly_confident">
          Slightly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="somewhat_confident">
          Somewhat Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios4" value="fairly_confident">
          Fairly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios5" value="completely_confident">
          Completely Confident
        </label>
      </div>

      <button id="likert-one-continue" class="btn btn-primary" onclick="handleRadioButtonSelection('likert-one')">Continue</button>
    </div>

    <div class="round-two">
      <h1>Round Two</h1>

      <!-- Make a radio selection using images -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
          <img src="images/roundtwo/uv_googles.png" alt="Image 1" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
          <img src="images/roundtwo/anti_fog_googles.png" alt="Image 2" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
          <img src="images/roundtwo/silicone_googles.png" alt="Image 3" draggable="false">
        </label>
      </div>
      <button id="round-two-continue" class="btn btn-primary" onclick="handleRadioButtonSelection('round-two')">Continue</button>

    </div>

    <div class="likert-two">
      <h4>How confident are you with the chosen product?</h4>

      <!-- Make a 5-point likert scale -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="not_confident">
          Not Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="slightly_confident">
          Slightly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="somewhat_confident">
          Somewhat Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios4" value="fairly_confident">
          Fairly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios5" value="completely_confident">
          Completely Confident
        </label>
      </div>
      <button id="likert-two-continue" class="btn btn-primary" onclick="handleRadioButtonSelection('likert-two')">Continue</button>
    </div>

    <div class="round-three">
      <h1>Round Three</h1>

      <!-- Make a radio selection using images -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1">
          <img src="images/roundthree/gerrman_umbrella.png" alt="Image 1" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">
          <img src="images/roundthree/lightweight_umbrella.png" alt="Image 2" draggable="false">
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="option3">
          <img src="images/roundthree/anti_pressure_umbrella.png" alt="Image 3" draggable="false">
        </label>
      </div>
      <button id="round-three-continue" class="btn btn-primary" onclick="handleRadioButtonSelection('round-three')">Continue</button>

    </div>

    <div class="likert-three">
      <h4>How confident are you with the chosen product?</h4>

      <!-- Make a 5-point likert scale -->
      <div class="radio">
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios1" value="not_confident">
          Not Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios2" value="slightly_confident">
          Slightly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios3" value="somewhat_confident">
          Somewhat Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios4" value="fairly_confident">
          Fairly Confident
        </label>
        <label>
          <input type="radio" name="optionsRadios" id="optionsRadios5" value="completely_confident">
          Completely Confident
        </label>
      </div>
      <button id="likert-three-continue" class="btn btn-primary" onclick="handleRadioButtonSelection('likert-three')">Continue</button>
    </div>

    <div class="results">
      <h1>Results</h1>
      <p>Thank you for participating in the experiment.</p>
      <p>Your results have been recorded.</p>
      <p>Please copy the results below and send it to the practitioner. Thank you!</p>
      <div class="copy-results">

      </div>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="jquery-3.7.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      var hello = "what";
      var startTime;
      var tempRound;


      function startTimer() {
          startTime = new Date();
      }

      function stopTimerAndLogTime(section) {
          var endTime = new Date();
          var elapsedTime = endTime - startTime;
          var roundTimeString = "";
          roundTimeString += section + '-time';
          selectedOptions[roundTimeString] = elapsedTime;
          console.log(`Time spent on ${section}: ${elapsedTime} milliseconds`);
      }
      // make a function that hides the welcome page and shows the instructions
      function goToNext(current_page) {
        if (current_page == "welcome") {
          $(".welcome-page").hide();
          $(".instructions").show();
        } else if (current_page == "instructions") {
          $(".instructions").hide();
          $(".sample-round").show();
        } else if (current_page == "sample-round") {
          if (!validateRadioSelection('sample-round')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".sample-round").hide();
          $(".sample-likert").show();
        } else if (current_page == "sample-likert") {
          if (!validateRadioSelection('sample-likert')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".sample-likert").hide();
          $(".confirm-to-start").show();
        } else if (current_page == "confirm") {
          $(".confirm-to-start").hide();
          $(".round-one").show();
          startTimer();
        } else if (current_page == "round-one") {
          tempRound = current_page;
          if (!validateRadioSelection('round-one')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".round-one").hide();
          stopTimerAndLogTime(tempRound);
          $(".likert-one").show();
        } else if (current_page == "likert-one") {
          if (!validateRadioSelection('likert-one')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".likert-one").hide();
          $(".round-two").show();
          startTimer();
        } else if (current_page == "round-two") {
          tempRound = current_page;
          if (!validateRadioSelection('round-two')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".round-two").hide();
          stopTimerAndLogTime(tempRound);
          $(".likert-two").show();
        } else if (current_page == "likert-two") {
          if (!validateRadioSelection('likert-two')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".likert-two").hide();
          $(".round-three").show();
          startTimer();
        } else if (current_page == "round-three") {
          tempRound = current_page;
          if (!validateRadioSelection('round-three')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".round-three").hide();
          stopTimerAndLogTime(tempRound);
          $(".likert-three").show();
        } else if (current_page == "likert-three") {
          if (!validateRadioSelection('likert-three')) {
            alert("Please make a selection before continuing.");
            return;
          }
          $(".likert-three").hide();
          $(".results").show();
          // Display the results
          var results = getSelectedOptions();
          var resultsString = "";
          // Loop through the value pairs
          for (var key in results) {
            resultsString += `${results[key]}`;
            // if not last key, add comma
            if (key !== "likert-three") {
              resultsString += ", ";
            }
          }
          $(".copy-results").html(resultsString);
        }
      }

      // Check if a selection has been made
      function validateRadioSelection(section) {
        var isSelected = false;
        // selects all input elements of type radio in the section
        $(`.${section} input[type="radio"]`).each(function() {
          if (this.checked) {
            isSelected = true;
            return false;
          }
        });
        return isSelected;
      }

    </script>
  </body>
</html>
